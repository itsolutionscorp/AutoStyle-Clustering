( canSelect ( cond ( != ( % ( + ))))( pieceAt )( cond ( moving )( pieceAt )( cond ( == ))( cond ( != ( side )))( cond ( != )( cond ( != ( side )))))( cond ( moving )( cond ( == )( pieceAt )( cond ( && ( canEndTurn )( ! ( hasCaptured ))))( cond ( withinRange )( cond ( isKing )( cond ( || ( && ( == ( side ))( < ))( && ( == ( side ))( > ))))))( cond ( withinRange )( cond ( wouldCapture ( pieceAt ( + ( cond ( > )( - )))( + ( cond ( > )( - )))))( cond ( isKing )( cond ( || ( && ( == ( side ))( < ))( && ( == ( side ))( > )))))))( cond ( && ( canEndTurn )( ! ( hasCaptured )))( cond ( && ( && ( && ( == ( side ))( == ))( == ))( ! ( hasCaptured )))( reset ))))( cond ( == )( cond ( && ( canEndTurn )( ! ( hasCaptured )))))))
