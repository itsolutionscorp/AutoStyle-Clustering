s(:block, s(:defn, :wordsize, s(:args), s(:lasgn, :size, s(:lit, 0)), s(:iter, s(:call, s(:self), :each_byte), s(:args, :c), s(:lasgn, :size, s(:call, s(:lvar, :size), :+, s(:lvar, :c)))), s(:return, s(:lvar, :size))), s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :anagrams, s(:array)), s(:iasgn, :@words, s(:iter, s(:call, s(:lvar, :words), :map), s(:args, :word), s(:call, s(:lvar, :word), :downcase))), s(:iasgn, :@word_s, s(:iter, s(:call, s(:ivar, :@words), :map), s(:args, :word), s(:call, s(:lvar, :word), :wordsize))), s(:iter, s(:call, s(:ivar, :@word_s), :each), s(:args, :size), s(:block, s(:lasgn, :anag, s(:array)), s(:iter, s(:call, s(:ivar, :@words), :map), s(:args, :word), s(:if, s(:call, s(:call, s(:lvar, :word), :wordsize), :==, s(:lvar, :size)), s(:call, s(:lvar, :anag), :<<, s(:call, s(:lvar, :words), :[], s(:call, s(:ivar, :@words), :index, s(:lvar, :word)))), nil)), s(:call, s(:lvar, :anagrams), :<<, s(:lvar, :anag)))), s(:return, s(:call, s(:lvar, :anagrams), :uniq))))