s(:defn, :combine_anagrams, s(:args, :words), s(:defn, :anagram?, s(:args, :x, :y), s(:call, s(:call, s(:call, s(:call, s(:lvar, :x), :downcase), :split, s(:str, "")), :sort), :==, s(:call, s(:call, s(:call, s(:lvar, :y), :downcase), :split, s(:str, "")), :sort))), s(:lasgn, :anagrams, s(:array)), s(:lasgn, :flat, s(:call, s(:lvar, :words), :flatten)), s(:iter, s(:call, s(:lvar, :flat), :cycle), s(:args, :word), s(:block, s(:call, s(:lvar, :anagrams), :<<, s(:array, s(:call, s(:lvar, :flat), :delete, s(:lvar, :word)))), s(:iter, s(:call, s(:lvar, :anagrams), :each_index), s(:args, :index), s(:iter, s(:call, s(:lvar, :flat), :each), s(:args, :w), s(:if, s(:call, nil, :anagram?, s(:call, s(:call, s(:lvar, :anagrams), :[], s(:lvar, :index)), :[], s(:lit, 0)), s(:lvar, :w)), s(:call, s(:call, s(:lvar, :anagrams), :[], s(:lvar, :index)), :<<, s(:call, s(:lvar, :flat), :delete, s(:lvar, :w))), nil))))), s(:lvar, :anagrams))