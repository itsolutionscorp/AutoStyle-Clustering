s(:defn, :combine_anagrams, s(:args, :words), s(:if, s(:call, s(:call, s(:lvar, :words), :length), :==, s(:lit, 0)), s(:return, s(:array)), nil), s(:lasgn, :index, s(:lit, -1)), s(:lasgn, :letters_sorted, s(:iter, s(:call, s(:lvar, :words), :map), s(:args, :w), s(:array, s(:call, s(:call, s(:call, s(:call, s(:lvar, :w), :downcase), :split, s(:str, "")), :sort), :join), s(:lasgn, :index, s(:call, s(:lvar, :index), :+, s(:lit, 1)))))), s(:lasgn, :words_sorted, s(:iter, s(:call, s(:lvar, :letters_sorted), :sort), s(:args, :x, :y), s(:call, s(:call, s(:lvar, :x), :[], s(:lit, 0)), :<=>, s(:call, s(:lvar, :y), :[], s(:lit, 0))))), s(:lasgn, :match, s(:str, "")), s(:lasgn, :in_index, s(:lit, -1)), s(:lasgn, :out_index, s(:lit, -1)), s(:lasgn, :result, s(:array, s(:array))), s(:iter, s(:call, s(:lvar, :words_sorted), :each), s(:args, :a), s(:block, s(:if, s(:call, s(:lvar, :match), :!=, s(:call, s(:lvar, :a), :[], s(:lit, 0))), s(:block, s(:lasgn, :out_index, s(:call, s(:lvar, :out_index), :+, s(:lit, 1))), s(:lasgn, :match, s(:call, s(:lvar, :a), :[], s(:lit, 0))), s(:lasgn, :in_index, s(:lit, -1)), s(:attrasgn, s(:lvar, :result), :[]=, s(:lvar, :out_index), s(:array))), nil), s(:lasgn, :in_index, s(:call, s(:lvar, :in_index), :+, s(:lit, 1))), s(:attrasgn, s(:call, s(:lvar, :result), :[], s(:lvar, :out_index)), :[]=, s(:lvar, :in_index), s(:call, s(:lvar, :words), :[], s(:call, s(:lvar, :a), :[], s(:lit, 1)))))), s(:lvar, :result))