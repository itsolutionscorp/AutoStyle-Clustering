s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :word_anagram_pairs, s(:iter, s(:call, s(:lvar, :words), :map), s(:args, :word), s(:array, s(:lvar, :word), s(:call, s(:call, s(:call, s(:call, s(:lvar, :word), :downcase), :chars), :sort), :join)))), s(:lasgn, :unique_anagrams, s(:call, s(:iter, s(:call, s(:lvar, :word_anagram_pairs), :map), s(:args, :pair), s(:call, s(:lvar, :pair), :[], s(:lit, 1))), :uniq)), s(:lasgn, :output, s(:call, s(:const, :Array), :new)), s(:iter, s(:call, s(:lvar, :unique_anagrams), :each), s(:args, :anagram), s(:call, s(:lvar, :output), :push, s(:iter, s(:call, s(:iter, s(:call, s(:lvar, :word_anagram_pairs), :select), s(:args, :pair), s(:call, s(:call, s(:lvar, :pair), :[], s(:lit, 1)), :==, s(:lvar, :anagram))), :map), s(:args, :pair), s(:call, s(:lvar, :pair), :[], s(:lit, 0))))), s(:lvar, :output))