s(:block, s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :words_alpha_rearr, s(:array)), s(:iter, s(:call, s(:lvar, :words), :each), s(:args, :x), s(:call, s(:lvar, :words_alpha_rearr), :<<, s(:call, s(:call, s(:call, s(:call, s(:lvar, :x), :chars), :sort_by, s(:block_pass, s(:lit, :downcase))), :join), :downcase))), s(:lasgn, :words_alpha_rearr_unique, s(:call, s(:lvar, :words_alpha_rearr), :uniq)), s(:lasgn, :output, s(:call, s(:const, :Array), :new, s(:call, s(:lvar, :words_alpha_rearr_unique), :count))), s(:iter, s(:call, s(:lvar, :words_alpha_rearr_unique), :each_with_index), s(:args, :z, :uidx), s(:block, s(:lasgn, :results_with_index, s(:iter, s(:call, s(:call, s(:lvar, :words_alpha_rearr), :each_with_index), :select), s(:args, :i, :idx), s(:call, s(:lvar, :i), :==, s(:lvar, :z)))), s(:iter, s(:call, s(:lvar, :results_with_index), :map!), s(:args, :i), s(:call, s(:lvar, :i), :[], s(:lit, 1))), s(:attrasgn, s(:lvar, :output), :[]=, s(:lvar, :uidx), s(:call, s(:const, :Array), :new, s(:call, s(:lvar, :results_with_index), :count))), s(:lasgn, :g, s(:lit, 0)), s(:iter, s(:call, s(:lvar, :results_with_index), :each), s(:args, :p, :idx), s(:block, s(:attrasgn, s(:call, s(:lvar, :output), :[], s(:lvar, :uidx)), :[]=, s(:lvar, :g), s(:call, s(:lvar, :words), :[], s(:lvar, :p))), s(:lasgn, :g, s(:call, s(:lvar, :g), :+, s(:lit, 1))))))), s(:return, s(:lvar, :output))))