s(:block, s(:defn, :is_anagram, s(:args, :x, :y), s(:return, s(:call, s(:call, s(:call, s(:call, s(:call, s(:lvar, :x), :chars), :sort), :join), :downcase), :==, s(:call, s(:call, s(:call, s(:call, s(:lvar, :y), :chars), :sort), :join), :downcase)))), s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :groups, s(:array)), s(:iter, s(:call, s(:lvar, :words), :each_index), s(:args, :x), s(:block, s(:lasgn, :g, s(:call, s(:const, :Array), :new)), s(:call, s(:lvar, :g), :push, s(:call, s(:lvar, :words), :[], s(:lvar, :x))), s(:iter, s(:call, s(:lvar, :words), :each_index), s(:args, :y), s(:if, s(:call, s(:lvar, :x), :==, s(:lvar, :y)), nil, s(:if, s(:call, nil, :is_anagram, s(:call, s(:lvar, :words), :[], s(:lvar, :x)), s(:call, s(:lvar, :words), :[], s(:lvar, :y))), s(:call, s(:lvar, :g), :push, s(:call, s(:lvar, :words), :[], s(:lvar, :y))), nil))), s(:if, s(:call, s(:call, s(:lvar, :groups), :flatten), :index, s(:call, s(:lvar, :words), :[], s(:lvar, :x))), nil, s(:call, s(:lvar, :groups), :push, s(:lvar, :g))))), s(:return, s(:lvar, :groups))))