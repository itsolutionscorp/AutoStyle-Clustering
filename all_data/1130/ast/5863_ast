s(:block, s(:lasgn, :str, s(:str, "String")), s(:call, nil, :p, s(:str, "sorting String:"), s(:call, s(:call, s(:call, s(:lvar, :str), :chars), :sort_by, s(:block_pass, s(:lit, :downcase))), :join)), s(:lasgn, :input, s(:array, s(:str, "cars"), s(:str, "for"), s(:str, "potatoes"), s(:str, "racs"), s(:str, "four"), s(:str, "scar"), s(:str, "creams"), s(:str, "scream"))), s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :anagrams, s(:array)), s(:lasgn, :groupHash, s(:hash)), s(:iter, s(:call, s(:lvar, :words), :each_with_index), s(:args, :word, :index), s(:block, s(:lasgn, :group, s(:array)), s(:lasgn, :w1, s(:call, s(:call, s(:call, s(:call, s(:lvar, :word), :chars), :sort_by, s(:block_pass, s(:lit, :downcase))), :join), :downcase)), s(:if, s(:call, s(:call, s(:lvar, :groupHash), :[], s(:lvar, :w1)), :==, s(:nil)), s(:attrasgn, s(:lvar, :groupHash), :[]=, s(:lvar, :w1), s(:array)), nil), s(:call, s(:call, s(:lvar, :groupHash), :[], s(:lvar, :w1)), :<<, s(:lvar, :word)))), s(:lasgn, :result, s(:array)), s(:iter, s(:call, s(:lvar, :groupHash), :each_value), s(:args, :value), s(:call, s(:lvar, :result), :<<, s(:lvar, :value))), s(:lvar, :result)), s(:defn, :combine_anagramsx, s(:args, :words), s(:lasgn, :anagrams, s(:array)), s(:lasgn, :groupHash, s(:hash)), s(:iter, s(:call, s(:lvar, :words), :each_with_index), s(:args, :word, :index), s(:block, s(:lasgn, :group, s(:array)), s(:lasgn, :w1, s(:str, "")), s(:iter, s(:call, s(:lvar, :words), :each_with_index), s(:args, :compareWord, :compareIndex), s(:block, s(:lasgn, :w1, s(:call, s(:call, s(:call, s(:call, s(:lvar, :word), :chars), :sort_by, s(:block_pass, s(:lit, :downcase))), :join), :downcase)), s(:lasgn, :w2, s(:call, s(:call, s(:call, s(:call, s(:lvar, :compareWord), :chars), :sort_by, s(:block_pass, s(:lit, :downcase))), :join), :downcase)), s(:if, s(:and, s(:call, s(:lvar, :w1), :==, s(:lvar, :w2)), s(:and, s(:call, s(:lvar, :index), :!=, s(:lvar, :compareIndex)), s(:call, s(:call, s(:lvar, :groupHash), :[], s(:lvar, :w1)), :==, s(:nil)))), s(:block, s(:lasgn, :group, s(:call, s(:lvar, :group), :+, s(:array, s(:lvar, :compareWord)))), s(:call, nil, :print, s(:str, "new group "), s(:lvar, :group), s(:str, "\n"))), nil), s(:if, s(:and, s(:call, s(:call, s(:lvar, :group), :length), :==, s(:lit, 0)), s(:and, s(:call, s(:call, s(:lvar, :groupHash), :[], s(:lvar, :w1)), :==, s(:nil)), s(:call, s(:lvar, :index), :!=, s(:lvar, :compareIndex)))), s(:lasgn, :group, s(:call, s(:lvar, :group), :+, s(:array, s(:lvar, :word)))), nil))), s(:attrasgn, s(:lvar, :groupHash), :[]=, s(:lvar, :w1), s(:lit, 1)), s(:if, s(:call, s(:call, s(:lvar, :group), :length), :>, s(:lit, 0)), s(:lasgn, :anagrams, s(:call, s(:lvar, :anagrams), :+, s(:array, s(:lvar, :group)))), nil))), s(:lvar, :anagrams)), s(:call, nil, :p, s(:call, nil, :combine_anagrams, s(:lvar, :input))), s(:lasgn, :input1, s(:array, s(:str, "a"), s(:str, "b"), s(:str, "c"), s(:str, "d"), s(:str, "a"), s(:str, "d"))), s(:lasgn, :input2, s(:call, s(:call, s(:call, s(:array, s(:str, "cars"), s(:str, "cars"), s(:str, "racs"), s(:str, "scar")), :sort), :+, s(:array, s(:str, "four"), s(:str, "for"), s(:str, "potatoes"))), :+, s(:call, s(:array, s(:str, "creams"), s(:str, "scream"), s(:str, "scream")), :sort))), s(:lasgn, :input3a, s(:call, s(:array, s(:str, "pots"), s(:str, "spot"), s(:str, "stop"), s(:str, "tops"), s(:str, "tops")), :sort)), s(:lasgn, :input3b, s(:call, s(:call, s(:array, s(:str, "spots"), s(:str, "stops")), :sort), :<<, s(:str, "sausage"))), s(:lasgn, :input3, s(:call, s(:lvar, :input3a), :+, s(:lvar, :input3b))), s(:lasgn, :input4, s(:call, s(:array, s(:str, "A"), s(:str, "a")), :sort)), s(:lasgn, :input5, s(:array, s(:str, "A"), s(:str, "a"), s(:str, "B"), s(:str, "c"), s(:str, "B"))), s(:lasgn, :input6, s(:call, s(:array, s(:str, "HeLLo"), s(:str, "hello")), :sort)), s(:lasgn, :input7, s(:array, s(:str, "Dog"), s(:str, "dog"), s(:str, "cat"), s(:str, "CAT"))), s(:call, nil, :p, s(:str, "Failed test cases, 70% score, 82% next attempt after fixing case sensitivity")), s(:call, nil, :p, s(:lvar, :input2)), s(:lasgn, :input4, s(:call, s(:call, s(:call, s(:call, s(:array, s(:str, "a"), s(:str, "a"), s(:str, "a"), s(:str, "A")), :sort), :+, s(:array, s(:str, "b"), s(:str, "b"))), :+, s(:array, s(:str, "c"))), :+, s(:array, s(:str, "D"), s(:str, "d")))), s(:call, nil, :p, s(:str, "retest")), s(:call, nil, :p, s(:lvar, :input1), s(:call, nil, :combine_anagrams, s(:lvar, :input1))), s(:call, nil, :p, s(:lvar, :input2), s(:call, nil, :combine_anagrams, s(:lvar, :input2))), s(:call, nil, :p, s(:lvar, :input3), s(:call, nil, :combine_anagrams, s(:lvar, :input3))), s(:call, nil, :p, s(:lvar, :input4), s(:call, nil, :combine_anagrams, s(:lvar, :input4))))