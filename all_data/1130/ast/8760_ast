s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :a_words, s(:call, s(:call, s(:call, s(:lvar, :words), :join, s(:str, " ")), :gsub, s(:lit, /\W/), s(:str, " ")), :split)), s(:lasgn, :a_vistos, s(:array)), s(:lasgn, :a_ret, s(:array)), s(:iter, s(:call, s(:lvar, :a_words), :each), s(:args, :i), s(:block, s(:lasgn, :str_down, s(:call, s(:call, s(:call, s(:call, s(:lvar, :i), :downcase), :chars), :sort), :join)), s(:if, s(:call, s(:lvar, :a_vistos), :include?, s(:lvar, :str_down)), s(:next), nil), s(:lasgn, :a_iguais, s(:iter, s(:call, s(:lvar, :a_words), :select), s(:args, :x), s(:call, s(:call, s(:call, s(:call, s(:call, s(:lvar, :x), :downcase), :chars), :sort), :join), :==, s(:lvar, :str_down)))), s(:call, nil, :puts, s(:call, s(:call, s(:call, s(:lvar, :a_iguais), :to_s), :+, s(:str, " bla ")), :+, s(:call, s(:lvar, :i), :to_s))), s(:call, nil, :puts, s(:call, s(:lvar, :i), :class)), s(:call, s(:lvar, :a_vistos), :push, s(:lvar, :str_down)), s(:lasgn, :a_nao_vistos, s(:iter, s(:call, s(:lvar, :a_words), :select), s(:args, :x), s(:call, s(:call, s(:lvar, :a_vistos), :include?, s(:call, s(:call, s(:call, s(:call, s(:lvar, :x), :downcase), :chars), :sort), :join)), :!))), s(:iter, s(:call, s(:lvar, :a_nao_vistos), :each), s(:args, :j), s(:if, s(:call, s(:call, s(:call, s(:call, s(:call, s(:lvar, :j), :downcase), :chars), :sort), :join), :==, s(:lvar, :str_down)), s(:block, s(:call, s(:lvar, :a_iguais), :<<, s(:lvar, :j)), s(:call, s(:lvar, :a_vistos), :push, s(:call, s(:call, s(:call, s(:call, s(:lvar, :j), :downcase), :chars), :sort), :join))), nil)), s(:call, s(:lvar, :a_ret), :<<, s(:lvar, :a_iguais)))), s(:lvar, :a_ret))