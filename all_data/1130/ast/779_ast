s(:block, s(:defn, :anagram?, s(:args, :x, :y), s(:call, s(:call, s(:call, s(:call, s(:lvar, :x), :downcase), :split, s(:str, "")), :sort), :==, s(:call, s(:call, s(:call, s(:lvar, :y), :downcase), :split, s(:str, "")), :sort))), s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :anagrams, s(:array)), s(:lasgn, :flat, s(:call, s(:lvar, :words), :flatten)), s(:while, s(:call, s(:call, s(:lvar, :flat), :length), :>, s(:lit, 0)), s(:block, s(:if, s(:lasgn, :ana, s(:iter, s(:call, s(:lvar, :flat), :select), s(:args, :word), s(:call, nil, :anagram?, s(:lvar, :word), s(:call, s(:lvar, :flat), :[], s(:lit, 0))))), s(:call, s(:lvar, :anagrams), :push, s(:lvar, :ana)), s(:call, s(:lvar, :anagrams), :push, s(:array, s(:call, s(:lvar, :flat), :[], s(:lit, 0))))), s(:lasgn, :flat, s(:call, s(:lvar, :flat), :-, s(:call, s(:lvar, :anagrams), :[], s(:lit, -1))))), true), s(:lvar, :anagrams)))