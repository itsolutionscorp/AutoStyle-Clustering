( canSelect ( pieceAt )( cond ( == )( cond ( != )( cond ( == )( || ( validMove )( canCapture ))( cond ( hasCaptured )( canCapture ))))( cond ( == ( side ))( || ( == )( == )))))
