s(:block, s(:defn, :combine_anagrams, s(:args, :words), s(:lasgn, :word_pairs, s(:array)), s(:lasgn, :word_pairs_sorted, s(:array)), s(:iter, s(:call, s(:lvar, :words), :each), s(:args, :word), s(:block, s(:lasgn, :word_sorted, s(:call, s(:call, s(:call, s(:call, s(:lvar, :word), :downcase), :split, s(:str, "")), :sort), :join)), s(:lasgn, :word_pairs, s(:call, s(:lvar, :word_pairs), :+, s(:array, s(:array, s(:lvar, :word_sorted), s(:lvar, :word))))))), s(:lasgn, :word_pairs_sorted, s(:iter, s(:call, s(:lvar, :word_pairs), :sort), s(:args, :a, :b), s(:call, s(:call, s(:lvar, :a), :[], s(:lit, 0)), :<=>, s(:call, s(:lvar, :b), :[], s(:lit, 0))))), s(:lasgn, :anagrams, s(:array)), s(:if, s(:call, s(:call, s(:lvar, :word_pairs_sorted), :size), :>, s(:lit, 0)), s(:block, s(:lasgn, :last_pair, s(:call, s(:lvar, :word_pairs_sorted), :[], s(:lit, 0))), s(:lasgn, :work_list, s(:array, s(:call, s(:call, s(:lvar, :word_pairs_sorted), :[], s(:lit, 0)), :[], s(:lit, 1)))), s(:call, nil, :print, s(:str, "\n")), s(:for, s(:dot2, s(:lit, 1), s(:call, s(:call, s(:lvar, :word_pairs_sorted), :size), :-, s(:lit, 1))), s(:lasgn, :i), s(:if, s(:call, s(:call, s(:call, s(:lvar, :word_pairs_sorted), :[], s(:lvar, :i)), :[], s(:lit, 0)), :>, s(:call, s(:lvar, :last_pair), :[], s(:lit, 0))), s(:block, s(:lasgn, :anagrams, s(:lasgn, :anagrams, s(:call, s(:lvar, :anagrams), :+, s(:array, s(:lvar, :work_list))))), s(:lasgn, :last_pair, s(:call, s(:lvar, :word_pairs_sorted), :[], s(:lvar, :i))), s(:lasgn, :work_list, s(:array, s(:call, s(:call, s(:lvar, :word_pairs_sorted), :[], s(:lvar, :i)), :[], s(:lit, 1))))), s(:if, s(:call, s(:call, s(:call, s(:lvar, :word_pairs_sorted), :[], s(:lvar, :i)), :[], s(:lit, 0)), :==, s(:call, s(:lvar, :last_pair), :[], s(:lit, 0))), s(:block, s(:lasgn, :last_pair, s(:call, s(:lvar, :word_pairs_sorted), :[], s(:lvar, :i))), s(:lasgn, :work_list, s(:call, s(:lvar, :work_list), :+, s(:array, s(:call, s(:lvar, :last_pair), :[], s(:lit, 1)))))), nil))), s(:lasgn, :anagrams, s(:lasgn, :anagrams, s(:call, s(:lvar, :anagrams), :+, s(:array, s(:lvar, :work_list)))))), nil), s(:lvar, :anagrams)))